<ul role="list" data-cadena-participants-target="period">
  <% if cadena.period_progression.positive? %>
    <div class="w-full h-4 rounded-full bg-steel">
      <div class="flex items-center justify-center h-4 text-white transition-all duration-1000 ease-out bg-blue-600 rounded-full" style="font-size:10px;width:0%" data-cadena-participants-target="periodProgress" data-period-progress="<%= cadena.period_progression %>"><%= cadena.period_progression.to_i %>%</div>
    </div>
  <% end %>
  <li class="flex items-center h-16 px-5 my-4 border border-blue-600 bg-midnight rounded-2xl first:mt-0">
    <div class="flex items-center justify-between w-full space-x-4">
      <div class="flex-shrink-0">
        <% if current_user.is_admin %>
          <%= link_to @next_paid_participant.user do %>
            <%= image_tag @next_paid_participant.avatar, class:"w-8 h-8 rounded-full hover:opacity-30" %>
          <% end %>
        <% else %>
          <%= image_tag @next_paid_participant.avatar, class:"w-8 h-8 rounded-full" %>
        <% end %>
      </div>
      <div class="flex-1 min-w-0">
        <div class="text-sm font-medium text-white truncate">
          <%= @next_paid_participant.name %>
        </div>
        <div class="text-xs text-placeholder_gray"><%= @next_paid_participant.withdrawal_date.strftime('%d/%m/%Y') %></div>
      </div>
      <% if @next_paid_participant.user == cadena.admin %>
        <p class="px-2 py-1 text-xs text-gray-400 uppercase border border-gray-400 rounded-lg">Admin</p>
      <% elsif @next_paid_participant.user == current_user %>
        <p class="px-2 py-1 text-xs text-gray-400 uppercase border border-gray-400 rounded-lg">Yo</p>
      <% end %>
    </div>
  </li>
  <p class="text-xs text-center uppercase text-placeholder_gray font-manrope">Pagaron (<%= cadena.period_ratio %>)</p>
  <% @except_next_paid.each do |participant| %>
    <li class="px-5 py-4 my-3 bg-midnight rounded-2xl first:mt-0">
      <div class="flex items-center space-x-4">
        <div class="flex-shrink-0">
          <%= link_to_cond(current_user&.is_admin?, participant.user) do %>
            <% if participant.avatar.attached? %>
              <%= image_tag participant.avatar, class: "w-8 h-8 rounded-full #{current_user&.is_admin ? 'hover:opacity-30' : ''}" %>
            <% else %>
              <%= image_tag 'default_avatar.png', class: "w-8 h-8 rounded-full #{current_user&.is_admin ? 'hover:opacity-30' : ''}" %>
            <% end %>
          <% end %>
        </div>
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-white truncate">
            <%= participant.name %>
          </p>
        </div>
        <% if participant.user == cadena.admin %>
          <p class="px-2 py-1 text-xs text-gray-400 uppercase border border-gray-400 rounded-lg">Admin</p>
        <% elsif participant.user == current_user %>
          <p class="px-2 py-1 text-xs text-gray-400 uppercase border border-gray-400 rounded-lg">Yo</p>
        <% end %>
        <% if participant.paid_next_participant? %>
          <%= inline_svg_tag('svg/check.svg', class: 'w-5 text-white rounded-full bg-blue-600 p-1') %>
        <% else %>
          <span class="w-5 h-5 border rounded-full border-midnight_light bg-midnight_light/10"></span>
        <% end %>
      </div>
    </li>
  <% end %>
</ul>
